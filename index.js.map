{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47077986-634596916a6757457166893bd';\nconst BASE_URL = `https://pixabay.com/api/`;\n\nexport default async function dataRequest(userRequest, page = 1, per_page = 15) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: `${userRequest}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page,\n  });\n\n  const { data } = await axios(`${BASE_URL}?${params}`);\n\n  return data;\n}\n","export default function makeMarkup(pictArray) {\n  return pictArray\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <li class=\"gallery-item\">\n                <div class=\"gallery-item-imgblock imgblock\">\n                    <a class=\"img-link\" href=\"${largeImageURL}\">\n\t\t                <img \n\t\t\t                class=\"gallery-image\" \n\t\t\t                src=\"${webformatURL}\" \n\t\t\t                alt=\"${tags}\" \n\t\t\t            />\n\t                </a>\n                </div>\n                <ul class=\"gallery-info info-list\">\n                    <li class=\"info-item\">\n                        <h6>Likes</h6>\n                        <p>${likes}</p>\n                    </li>\n                    <li class=\"info-item\">\n                        <h6>Views</h6>\n                        <p>${views}</p>\n                    </li>\n                    <li class=\"info-item\">\n                        <h6>Comments</h6>\n                        <p>${comments}</p>\n                    </li>\n                    <li class=\"info-item\">\n                        <h6>Downloads</h6>\n                        <p>${downloads}</p>\n                    </li>\n                </ul>\n            </li>\n        `;\n      }\n    )\n    .join('');\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport dataRequest from './js/pixabay-api';\nimport makeMarkup from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('#loader');\nconst gallery = document.querySelector('.gallery');\nconst loadButton = document.querySelector('.btn-load');\n\nlet userRequest = '';\nlet page = 30;\nlet per_page = 15;\n\nform.addEventListener('submit', onBtnSubmit);\nloadButton.addEventListener('click', onBtnClick);\n\nfunction onBtnSubmit(event) {\n  event.preventDefault();\n  page = 30;\n\n  gallery.innerHTML = '';\n  loadButton.classList.add('visually-hidden');\n  loader.classList.remove('visually-hidden');\n\n  userRequest = event.currentTarget.elements.search.value.trim();\n\n  if (userRequest === '') {\n    loader.classList.add('visually-hidden');\n    return iziToast.error({\n      message: 'Please fill out the search form!',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      color: '#FAFAFB',\n      iconUrl: '../img/svg/x-icon.svg',\n      iconColor: '#FAFAFB',\n    });\n  }\n\n  uploadMoreItems();\n\n  form.reset();\n}\n\nasync function uploadMoreItems() {\n  try {\n    const data = await dataRequest(userRequest, page, per_page);\n\n    loader.classList.add('visually-hidden');\n    loadButton.disabled = false;\n    loadButton.classList.remove('visually-hidden');\n\n    if (data.hits.length === 0) {\n      loadButton.classList.add('visually-hidden');\n\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        color: '#FAFAFB',\n        iconUrl: '../img/svg/x-icon.svg',\n        iconColor: '#FAFAFB',\n      });\n    }\n\n    gallery.insertAdjacentHTML('beforeend', makeMarkup(data.hits));\n\n    if ((page >= Math.ceil(data.totalHits / per_page) && !!data.hits.length)) {\n      loadButton.classList.add('visually-hidden');\n      iziToast.info({\n        message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n        position: 'topRight',\n      });\n    }\n\n    page += 1;\n\n    let onPictureClick = new SimpleLightbox('.imgblock a', {\n      captions: true,\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n\n    onPictureClick.refresh();\n  } catch (error) {\n    loader.classList.add('visually-hidden');\n    loadButton.classList.add('visually-hidden');\n\n    iziToast.error({\n      title: 'Error',\n      message: `${error.message}`,\n    });\n  }\n}\n\nasync function onBtnClick() {\n  loadButton.disabled = true;\n  loader.classList.remove('visually-hidden');\n  await uploadMoreItems();\n\n  const { height: itemHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: itemHeight * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","dataRequest","userRequest","page","per_page","params","data","axios","makeMarkup","pictArray","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loader","gallery","loadButton","onBtnSubmit","onBtnClick","event","iziToast","uploadMoreItems","SimpleLightbox","error","itemHeight"],"mappings":"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"}